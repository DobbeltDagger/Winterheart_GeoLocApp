<!DOCTYPE html>
  html(lang="en")
    head
      meta(charset='utf-8')
      title Winterheart
      meta(name='description' content='Winterheart is a .... Jørn Rønnau')
      meta(name='viewport' content='width=device-width, initial-scale=1')
      script(src='https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js')
      link(href='https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css' rel='stylesheet' type="text/css")
      link(href='css/extraFonts.css' rel='stylesheet' type="text/css")
      link(href='css/grid.css' rel='stylesheet' type="text/css")
      link(href='css/style.css' rel='stylesheet' type="text/css")
      link(href='css/myMapbox.css' rel='stylesheet' type="text/css")
      link(href='css/galleryOverlay.css' rel='stylesheet' type="text/css")
      link(rel='apple-touch-icon' sizes='180x180' href='./apple-touch-icon.png')
      link(rel='icon' type='image/png' sizes='32x32' href='./favicon-32x32.png')
      link(rel='icon' type='image/png' sizes='16x16' href='./favicon-16x16.png')
      link(rel='manifest' href='./site.webmanifest')
      link(rel='mask-icon' href='./safari-pinned-tab.svg' color='#5bbad5')
      meta(name='msapplication-TileColor' content='#00a300')
      meta(name='theme-color' content='#ffffff')
      style.
        /* LOADER css - styling from codepen: https://codepen.io/Elbone/pen/sezjI */
        @-webkit-keyframes loading { to {-webkit-transform: rotate(360deg); } }
        @-moz-keyframes loading { to {-moz-transform: rotate(360deg); } }
        @-ms-keyframes loading { to {-ms-transform: rotate(360deg); } }
        @keyframes loading { to {transform: rotate(360deg); } }

        #loadingScreen {
          position: fixed;
          z-index: 9999;
          inset: 0;
          background-color: darkgreen;
          opacity: 1.0;
          transition: opacity 200ms ease;
        }
        #loadingScreen.hidden {
          opacity: 0.0;
          pointer-events: none;
        }
        #loadWrapper {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          opacity: 1.0;
          display: grid;
          grid-template-rows: 1fr max-content;
          justify-items: center;
          align-items: center;
          grid-gap: 1em;
        }
        #loadWrapper.hidden {
          opacity: 0.0;
          pointer-events: none;
        }      
        #loading {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: transparent;
          border-top: 5px solid rgba(255,255,255,0.92);
          border-right: 5px solid rgba(255,255,255,0.92);
          border-bottom: 5px solid rgba(255,255,255,0.35);
          border-left: 5px solid rgba(255,255,255,0.35);
          -webkit-animation: loading 1.2s infinite linear;
          -moz-animation: loading 1.2s infinite linear;
          -ms-animation: loading 1.2s infinite linear;
          animation: loading 1.2s infinite linear;
        }
        .loadText {
          color: rgba(255,255,255,0.92);
        }
        /* enterwrapper! */
        #enterWrapper {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          transition: opacity 200ms ease;
          opacity: 0.0;
          display: grid;
          grid-template-rows: 1fr max-content;
          justify-items: center;
          align-items: center;
          grid-gap: 1em;
        }
        #enterWrapper.shown {
          opacity: 1.0;
          transition: opacity 200ms ease;
        }
        #enterBtn {
          background: #0EC518;
          border: 3px solid rgba(255, 255, 255, 0.85); /* rgba(255,255,255,0.15); */
          border-radius: 100%;
          box-shadow:
            0 -2px 0 3px #0b9512 inset,
            0 5px 5px rgba(0, 7, 1, 0.17),
            0 15px rgba(255, 255, 255, 0.25) inset;
          cursor: pointer;
          display: inline-block;
          height: 4em;
          width: 4em;
          /*
          color: white;
          background-color: transparent;
          border: 2px solid rgba(255,255,255,0.92);
          border-radius: 1.5em;
          width: 1.75em;
          height: 1.75em;
          overflow: hidden;
          font-size: 1.75em;
          padding: 0.65em 1.15em 0.7em 1.15em;
          margin: 0px;
          background-color: rgba(0,0,0,0.125);
          box-shadow: 5px 5px 12px 5px rgb(0 0 0 / 35%);
          */
        }
        #enterBtn:hover { cursor: pointer; }
        .enterText {
          text-align: center;
          padding: 0px;
          margin: 0px;
          color: rgba(255,255,255,0.92);
        }
      script(src='js/geoLocThrottle.js')
      script(src='js/index.js' type='module')

    body
      // loading screen
      #loadingScreen
        #loadWrapper
          #loading
          .loadText Loading app ...
        #enterWrapper
          button#enterBtn
          // .enterText Enter app ...
          .enterText Welcome<br/>Click to enter

      // overlay for info and app functions
      #overlay
        a#closeOverlayBtn +

        include mixins/aboutOverlay.pug
        +aboutOverlay()

        include mixins/mediaOverlay.pug
        +mediaOverlay()

        include mixins/onlineMarkerOverlay.pug
        +onlineMarkerOverlay()

        include mixins/galleryOverlay.pug
        +galleryOverlay()

      // on page, outside overlay
      .pageWrapper
        #map
        // GEO LOCATION
        // .geoWrapper
          #status
          a#map-link

        include mixins/mobileMenuOverlay.pug
        +mobileMenuOverlay()

        include mixins/header.pug
        +header()

      script.
        const locations = JSON.parse(`!{Locations}`); // THIS makes the data global to the window! 
        const media = JSON.parse(`!{MediaItems}`); // THIS makes the data global to the window! 